<html>
  <head>
    <link href="assets/css/style.css" rel="stylesheet" />

    <link
      href="assets/css/bootstrap.min.css"
      rel="stylesheet"
      id="bootstrap-css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Crimson+Text&display=swap"
      rel="stylesheet"
    />
    <script src="assets/js/bootstrap.min.js"></script>
    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-3.3.1.min.js"
    ></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />


      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>


    <!-- <script src="https://www.gstatic.com/firebasejs/7.5.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.5.2/firebase-firestore.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> -->
    <title>RSVP - Rushanka & Adnan</title>


    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-firestore.js"></script>


  </head>
  <body
    style="margin: 0 0 0 0; font-family: 'Crimson Text', serif;"
    width="100%"
  >
    <div>
      <table
        align="center"
        style="margin-top:25px;margin-bottom:25px; width:350px"
      >
        <tr>
          <td
            align="right"
            style="width: 30%; color: #a19144; font-family: 'Crimson Text', serif; font-size: 1.3em;"
          >
            RUSHANKA
          </td>
          <td align="center">
            <img src="assets/lifetree.PNG" height="60" />
          </td>
          <td
            style="width: 30%; color: #a19144; font-family: 'Crimson Text', serif; font-size: 1.3em;"
          >
            ADNAN
          </td>
        </tr>
      </table>
    </div>

    <div style="height: 35px; width: 100%; background: white;">
      <table align="center" width="100%" border="0">
        <tr>
          <td width="33%" align="right">
            <h5>
              <a
                href="wedding.html"
                style="color: #6b6b6b; text-decoration: underline;"
                >wedding</a
              >
            </h5>
          </td>
          <td width="33%" align="center ">
            <h5 style="color: #6b6b6b;"><b>rsvp</b></h5>
          </td>
          <td width="33%" align="left">
            <h5>
              <a
                href="srilanka.html"
                style="color: #6b6b6b; text-decoration: underline;"
                >sri lanka</a
              >
            </h5>
          </td>
        </tr>
      </table>
    </div>
    <br /><br /><br /><br /><br />
    <center>
      <button
        id="tester"
        onclick="processData()"
        class="btn"
        style="background-color:#6b6b6b; padding-left: 20px; padding-right: 20px;"
      >
        <span style="color: white">Test</span></button
      ><br /><br />
      <form id="test-form" method="GET">
        <div style="width: 500px">
          <!-- <span class="help-block">Your name</span> -->
          <textarea row="10" cols="50" id="myTextarea"></textarea>
          <br />
        </div>

        <br />
        <button
          id="submit-form"
          class="btn"
          style="background-color:#6b6b6b; padding-left: 20px; padding-right: 20px;"
        >
          <span style="color: white">Confirm</span>
        </button>
        <br /><br /><br /><br /><br /><br /><br />
      </form>

      <div id="found"></div>

      <p class="text-center" style="color:#c4758e ">
        Made with <i class="glyphicon glyphicon-heart"></i><br /><a
          href="http://www.weddingsbysonali.com/"
          >Weddings By Sonali</a
        >
      </p>
      <br />
    </center>



    <script>


// testerere='';
// processData(testerere);

var firebaseConfig = {
    apiKey: "AIzaSyAxKWsLczr45ola3XmEmCnti_Bl5o_eVPc",
    authDomain: "wbs-rush-adn.firebaseapp.com",
    databaseURL: "https://wbs-rush-adn.firebaseio.com",
    projectId: "wbs-rush-adn",
    storageBucket: "wbs-rush-adn.appspot.com",
    messagingSenderId: "92680720757",
    appId: "1:92680720757:web:51bef5e02ca41bfc03033c"
  };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      const db = firebase.firestore();

function processData() {

var testere=[
  "70,A7K7Y,Diana & Anton,2,Mr. Anton Pieris,Mrs. Diana Pieris,,",
  "71,L7M1L,Ritchie,1,Mr. Ritchie Adaman,,,",
  "72,J3S4B,Melissa & Keith,2,Mr. Keith Rebeira,Mrs. Melissa Rebeira,,",
  "73,O5C9D,Srini & Hemanga,2,Mr. Hemanga Jayasundara,Mrs. Srini Jayasundara,,",
  "74,M2B3R,Dinal,1,Mr. Dinal Samarasinghe,,,",
  "75,J2E5N,Reshma & Pavan ,2,Mr. Pavan Welihinda,Mrs. Reshma Welihinda,,",
  "76,P7C4G,Dilantha & Roshaya,2,Mr. Dilantha  Liyanage,Mrs. Roshaya Liyanage,,",
  "77,S9R0D,Kalpani & Kumduh,2,Mr. Kumudh Pathirana,Mrs. Kumudh Pathirana,,",
  "78,J0X5Q,Sashini,1,Ms. Sashini Fernando,,,",
  "79,Q9E6H,Maleena & Zafar,2,Mr. Zafar Zainudeen,Mrs. Maleena Zainudeen,,",
  "80,P2A3E,Nataly,1,Ms. Nataly Hemantha,,,",
  "81,K7Y3I,Amanda & Pasan,2,Mr. Pasan Ranaweera,Mrs. Amanda Ranaweera,,",
  "82,S4A1V,Kavitha & Nuwan,2,Mr. Nuwan Perera,Mrs. Kavitha Perera,,",
  "83,H4B1X,Dimitra,1,Mr. Dimitra Abeysekara,,,",
  "84,U2W4C,Avijja & Isharya,2,Mr.Avijja Fonseka,Mr.Isharya Fonseka,,",
  "85,K0Z3H,Sulakshana & Shumaila,2,Mr. Sulakshana Dias Amaratunga,Ms.Shumaila Musafer,,",
  "86,U1V7O,Sharina & Chinthake,2,Mr. Chinthake Dissanayake,Mrs. Sharina Dissanayake,,",
  "87,P9N7Q,Natasha,1,Ms. Natasha Jayasinghe,,,",
  "88,U4R6Y,Janelle,1,Ms. Janelle Goonewardena,,,",
  "89,O1S2M,Shyara & Sash,2,Mr. Sash Raymond,Mrs. Shyara Raymon,,",
  "90,O8H7O,Jared Dineshika & Chamindri,3,Mr. Jared Fernando,Mrs. Dineshika Fernando ,Ms. Chamindri Coswatte,",
  "91,C8O3Z,Chehara,1,Ms. Chehara Amaratunga,,,",
  "92,E1U8W,Shafna,1,Mrs. Shafna Zubair,,,",
  "93,A2A3Q,Rukshani,1,Ms. Rukshani Wanigasekara,,,",
  "94,F9X0T,Kaushali,1,Ms. Kaushali Kusumapala,,,",
  "95,I3T5H,Anushka,1,Mrs. Anushka De Silva,,,",
  "96,A6Z9B,Shamil,1,Mr. Shamil De Dodwell,,,",
  "97,I4S3P,Prabashi & Radhiksha,2,Mr. Radhiksha Rabichandran,Prabashi Rabichandran,,",
  "98,Y5P3A,Thilini & Danura,2,Mr. Danura Wanniatchi,Mrs. Thilini Wanniatchi,,",
  "99,G4K1P,Tehan,1,Mr. Tehan Samarasinha,,,",
  "100,D9Q2V,Chathushki & Sayuru,2,Mr. Sayuru Peiris,Mrs. Chathushki Peiris,,",
  "101,P4D0S,Shafraz,1,Mr. Shafraz Saleem,,,",
  "102,U6U6U,Christina,1,Ms. Christina Arlandan,,,",
  "103,J1L9A,Supriya,1,Ms. Supriya Ramanathan,,,",
  "104,D9C1E,Maneesha & Shamika,2,Mr. Shamika Uduwella,Mrs. Maneesha Uduwella,,",
  "105,N5C9B,Amalini,1,Ms. Amalini De Sayrah,,,",
  "106,S1W9T,Jihan,1,Mr. Jihan Perera,,,",
  "107,A1D2C,Thashiya Nauki & Niranjan,2,Mr. Niranjan Arulpragasm,Mrs. Thashiya Nauki Arulpragasm,,",
  "108,B1V6O,Dinuka,1,Ms. Dinuka Hetthiarachy,,,",
  "109,Z4H7M,Chameera,1,Mr. Chameera Tillekeratne,,,",
  "110,W0X2N,Dhanushan,1,Mr. Dhanushan Arumugam,,,",
  "111,T2B6E,Nishadi,1,Ms. Nishadi Gunatilake,,,",
  "112,Z2A5H,Hiran,1,Hiran Geeganage,,,",
  "113,O9U9J,Natalie,1,Ms. Natalie Wijewardena,,,",
  "114,C4G6G,Asherah & Shehan,2,Mr. Shehan Gomez,Mrs. Asherah Gomez,,",
  "115,V0H1N,Michelle & Navid,2,Mr. Navid Munas,Mrs. Michelle Munas,,",
  "116,S1R4Y,Fazlan,1,Mr. Fazlan Faizal,,,",
  "117,P7I5S,Vidya,1,Mrs. Vidya Sivaraja,,,",
  "118,K4C8M,Rochana,1,Mr. Rochana Wijeyratne,,,",
  "119,F5U4C,Shanika,1,Mrs. Shanika Jayawardena,,,",
  "120,B3X0Y,Tharusha,1,Mr. Tharusha Hettiarachchi ,,,",
  "121,J2Z5X,Sathika,1,Mrs. Sathika Wickramasinghe,,,",
  "122,U4X1G,Priyan,1,Mr. Priyan Suthanthiraraj,,,",
  "123,Z4V1M,Shayana,1,Mrs. Shayana Seniviratne,,,",
  "124,G7D6B,Shehani,1,Mrs. Shehani Liyanage,,,",
  "125,V6A8W,Baratha,1,Mr. Baratha Piyadigama,,,",
  "126,R4J3R,Dinith,1,Mr. Dinith Pathirana,,,",
  "127,H3J7I,Dushani,1,Ms. Dushani Muniratne,,,",
  "128,G3I7R,Stephanie Ann & Heshan,2,Mr. Heshan De Silva,Mrs. Stephanie Ann De Silva,,",
  "129,R1P2U,Mihiri & Shiran,2,Mr. Shiran Paranavitharane,Mrs. Mihiri Paranavitharane,,",
  "130,O9T3P,Sean,1,Mr. Sean Schubert,,,",
  "131,A8C3X,Dulshan & Scheshaan,2,Mr. Dulshan McJacobs,Mr. Sceshaan McJacobs,,",
  "132,F0N1Z,Sachini,1,Mrs. Sachini Gamage ,,,",
]

    for (var i=0; i<testere.length; i++) {
      var nameArr=[""];
        var nameArr = testere[i].split(',');
console.log(nameArr[2]);
        var docData = {
          id: parseInt(nameArr[0]),
          accessl: nameArr[1].trim().toLowerCase(),
          inviteName: nameArr[2],
          iporuwa: parseInt(nameArr[3]),
          iPorList: [nameArr[4],nameArr[5],nameArr[6],nameArr[7]],
          didMehSubmit: false,
          didPorSubmit: false,
          didRecSubmit: false
        };



        db.collection("guestrhaya2")
          .doc(nameArr[0])
          .set(docData)
          .then(function() {
            console.log("Document successfully written! - " + nameArr[0]);
          });

    }
    console.log("Done success");

}

      function testero() {
        var name = document.getElementById("myTextarea").value;
        var nameArr = name.split(",");
        console.log("Array:" + nameArr[3]);

        console.log("Hello world! " + name);

        var docData = {
          id: parse.Int(nameArr[0]),
          namearray: [
            nameArr[1],
            nameArr[2].toLowerCase() + " " + nameArr[3].toLowerCase(),
            nameArr[2].toLowerCase(),
            nameArr[3].toLowerCase(),
            nameArr[4].toLowerCase()
          ],
          iporuwa: nameArr[5],
          imehendi: nameArr[6],
          ireception: nameArr[7],
          contactno: nameArr[8],
          rporuwa: 0,
          rmehendi: 0,
          rreception: 0,

        };

        db.collection("guest")
          .doc(nameArr[0])
          .set(docData)
          .then(function() {
            console.log("Document successfully written!");
          });

        db.collection("guest")
          .where("name", "==", name)
          .get()
          .then(function(querySnapshot) {
            if (querySnapshot.empty == true) {
              console.log("It's empty");
              document.getElementById("found").innerHTML = "Paragraph changed!";
            }

            querySnapshot.forEach(function(doc) {
              document.getElementById("found").innerHTML =
                "Hey !" + doc.data().name;
              // doc.data() is never undefined for query doc snapshots
              console.log(doc.id, " => ", doc.data());
            });
          })
          .catch(function(error) {
            console.log("Error getting documents: ", error);
          });
      }
    </script>
  </body>
  <html></html>
</html>
